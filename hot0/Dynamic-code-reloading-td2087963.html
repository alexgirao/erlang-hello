<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
			
				
					<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
					<link rel="stylesheet" href="Dynamic-code-reloading-td2087963_files/site.css" type="text/css">
	<link rel="stylesheet" href="Dynamic-code-reloading-td2087963_files/NamlServlet.css" type="text/css">
					<script src="Dynamic-code-reloading-td2087963_files/jquery-1.js" type="text/javascript"></script>
	<script src="Dynamic-code-reloading-td2087963_files/nabbledropdown-2.js" type="text/javascript"></script>
	<script src="Dynamic-code-reloading-td2087963_files/NamlServlet.js" type="text/javascript"></script>
					<script src="Dynamic-code-reloading-td2087963_files/urchin.js" type="text/javascript"></script>
	<script src="Dynamic-code-reloading-td2087963_files/analytics.js" type="text/javascript"></script>
					<script type="text/javascript">
		var terms = Nabble.getSearchTerms();
		var hasTurnOff = false;
		Nabble.searchHighlight = function($elem) {
			if (terms != null && terms.length > 0) {
				$elem.each(function() {
					Nabble.highlightSearchTerms(terms, this);
				});
				if (Nabble.hasHighlightedTerms && !hasTurnOff) {
					var turnOffLink = '<span id="turn-off-highlight-control"><span class="highlight">&nbsp;X&nbsp;</span> ';
					turnOffLink += '<a href="javascript:void(0)" onclick="Nabble.turnOffHighlight()">Turn off highlighting</a></span>';
					$('#topics-controls-right').prepend(turnOffLink);
					hasTurnOff = true;
				}
			}
		};
		Nabble.turnOffHighlight = function() {
			Nabble.deleteCookie("query");
			Nabble.deleteCookie("searchuser");
			Nabble.deleteCookie("searchterms");
			$('span.search-highlight').removeClass('bold highlight');
			$('#turn-off-highlight-control').hide();
		};
	</script>
	<script type="text/javascript">
		Nabble.messageTextWidth();
	</script>
			<script type="text/javascript"> $(document).ready(function() { Nabble.searchHighlight($('h2.post-subject,div.message-text')); }); </script> <script type="text/javascript"> if (location.hash) { (function(){ var post = location.hash.substr(2); var allPosts = [2087963, 2087964, 2087965, 2087968, 2087966, 2087967]; var allURLs = ["/Dynamic-code-reloading-td2087963.html"]; var iPost = allPosts.indexOf(parseInt(post)); var lower = 0; var upper = lower + 20; if (iPost != -1 && (iPost < lower || iPost >= upper)) location.replace(allURLs[Math.floor(iPost/20)]+location.hash); })(); } $(document).ready(function() { var rootId = '2087963'; var currentPostId = rootId; var isChangingViews = location.hash == '#none'; if (location.hash && !isChangingViews) currentPostId = location.hash.substr(2); Nabble.hideQuotes(); function scrollToSelectedPost() { var $arrow = $('#red-arrow'+currentPostId).show(); if ($arrow.size() > 0) { var isRootPost = currentPostId == rootId; if (Nabble.isEmbedded) { if (Nabble.canScroll()) scrollTo(0, 0); var y = isChangingViews? null : isRootPost? 1 : $arrow.parents('div.classic-row').offset().top; Nabble.resizeFrames('', y); } else if (Nabble.canScroll() && !isRootPost) { var yPos = $arrow.offset().top; scrollTo(0,yPos-20); } } else { var tb = $('div.top-bar').get(0); if (tb && Nabble.canScroll()) tb.scrollIntoView(); } }; $(window).load(scrollToSelectedPost); if (Nabble.isEmbedded) { $('div.message-text img').load(Nabble.resizeFrames); } }); </script> <style type="text/css"> div.classic-header { height:2.2em; clear:both; overflow:hidden; } div.classic-author-name { float:left; width: 140px; overflow: hidden; text-align:center; font-weight:bold; } div.classic-subject-line { left:.5em; overflow:hidden; height:1.3em; position:relative; } div.classic-right-menu { float:right; padding-left:1em; } div.classic-bar { padding:.5em .3em; clear:both; height:1.8em; } table.classic-body { border-collapse:collapse; margin-bottom:1em; table-layout: fixed; width:100%; } td.classic-author { vertical-align: top; text-align:center; width:140px; padding-bottom:1em; } td.classic-message { vertical-align:top; padding:1em; } div.message-text { cursor:text; overflow-x:auto; } div.avatar-inner { margin-left:20px; } div.avatar-outer { width:140px; text-align:left; } div.avatar-label { white-space:nowrap; font-size:80%; } </style>
	<title>Erlang Questions - Dynamic code reloading</title>
			<meta name="description" content="Dynamic code reloading. Please excuse me if this is a daft question...and I am sure there are OTP functions to do all this for you, but I wanted to show my students some features of &quot;pure&quot;...">
			<meta name="keywords" content="dynamic, code, reloading, excuse, daft, question, sure, otp, functions, do, all, for, you, wanted, show, my, students, some, features, pure, erlang, specifically, d, questions">
			<script type="text/javascript">
			Nabble.setView = function(view,url,post) {
				Nabble.setVar("tview",view);
				url += Nabble.getClientID(';');
				if (url.indexOf('#') == -1)
					url += '#none';
				location.replace(url);
			};
		</script><style type="text/css">
		div.nabble-tooltip {
			color: #000000;
			background: #EEEEEE;
			font-size:90%;
			width: 200px;
			line-height:normal;
			display: none;
			position: absolute;
			z-index: 8888;
			padding: .5em;
			border: 2px solid #CCCCCC;
			white-space:normal;
		}
		div.nabble-tooltip-small-row {
			color: #666666;
			font-size: 80%;
			padding: .3em .1em 0;
			text-shadow:none;
		}
		div.nabble-tooltip-arrow {
			font-size:40px;
			font-family: Arial;
			line-height:55px;
			left:15px;
			position:absolute;
			bottom:-15px;
			height:15px;
			width:30px;
			overflow:hidden;
		}
		div.nabble-tooltip-arrow div {
			position:absolute;
			text-shadow:none;
		}
		div.nabble-tooltip-arrow div.d1 {
			top:-28px;
			color: #CCCCCC;
		 }
		div.nabble-tooltip-arrow div.d2 {
			top:-31px;
			color: #EEEEEE;
		}
	</style>
	<script type="text/javascript">
		
		Nabble.startTooltip = function(e) {
			if (e.nabbletooltip)
				return;
			e.nabbletooltip = true;
			var $this = $(e);
			var $arrow = $this.children().last();
			var $elem = $this.prev();
			$elem.hover(
				function() {
					var o = $elem.offset();
					setTip(o.top, o.left);
					setTimer();
				},
				function() {
					stopTimer();
					$this.hide();
				}
			);

			function setTimer() {
				$this.showTipTimer = setTimeout(function() {
					$('div.nabble-tooltip').hide();
					stopTimer();
					$this.animate({"top": "+=10px", "opacity": "toggle"}, 200);
				}, 300);
			};
			function stopTimer() {
				clearInterval($this.showTipTimer);
			};
			function setTip(top, left){
				var useTitle = $this.attr('use_title') == 'true';
				if (useTitle) {
					var title = $elem.attr('title');
					if (title != '') {
						$arrow.remove();
						$this.html(title);
						$elem.attr('title','');
						$this.append($arrow);
					}
				}
				var h = $this.outerHeight();
				var w = $this.width();
				var win = $(window).width() - 8;
				var xTip = left-30;
				if (xTip+w > win)
					xTip = win-w-8;
				var xArrow = $elem.offset().left - xTip + $elem.width()/2- 13;
				var yTip = top-h-25;
				$arrow.css('left', xArrow);
				$this.css({'top' : yTip, 'left' : xTip});
			};
		};
		
	</script><script type="text/javascript">
			Nabble.pinTopic = function(id) {
				var call = '/template/NamlServlet.jtp?macro=pin_topic&node=' + id + Nabble.getClientID();
				$.getScript(call, function() {
					$('#pin-icon').show();
					NabbleDropdown.show('unpinTopic');
					NabbleDropdown.hide('pinTopic');
					alert('This topic has been pinned.');
				});
			};
		</script><script type="text/javascript">
			Nabble.unpinTopic = function(id) {
				var call = '/template/NamlServlet.jtp?macro=unpin_topic&node=' + id + Nabble.getClientID();
				$.getScript(call, function() {
					$('#pin-icon').hide();
					NabbleDropdown.hide('unpinTopic');
					NabbleDropdown.show('pinTopic');
					alert('This topic has been unpinned.');
				});
			};
		</script><script type="text/javascript">
			Nabble.lockTopic = function(id) {
				var call = '/template/NamlServlet.jtp?macro=lock_topic&node=' + id + Nabble.getClientID();
				$.getScript(call, function() {
					$('#lock-icon').show();
					NabbleDropdown.show('unlockTopic');
					NabbleDropdown.hide('lockTopic');
					alert('This topic has been locked.');
				});
			};
		</script><script type="text/javascript">
			Nabble.unlockTopic = function(id) {
				var call = '/template/NamlServlet.jtp?macro=unlock_topic&node=' + id + Nabble.getClientID();
				$.getScript(call, function() {
					$('#lock-icon').hide();
					NabbleDropdown.hide('unlockTopic');
					NabbleDropdown.show('lockTopic');
					alert('This topic has been unlocked.');
				});
			};
		</script><script type="text/javascript">
		var starredImg = new Image();
		starredImg.src = "/images/icon_starred.png";
		var unstarredImg = new Image();
		unstarredImg.src = "/images/icon_unstarred.png";
		var star = '<img src="/images/icon_starred.png" class="star" alt="star"/>';

		function starInit(isStarred, c, id) {
			$('#star'+c+id)
				.css('cursor','pointer')
				.click(function(){
					starToggle(c,id);
				});

			starShow(isStarred,c,id);
		};

		function starShow(isStarred,c,id) {
			var $img = $('#img-star'+c+id);
			if (isStarred)
				$img.attr('src', starredImg.src).attr('title', "Favorite (click to remove this item from your favorites list)");
			else
				$img.attr('src', unstarredImg.src).attr('title', "Add this item to your favorites list");
			updateReadonlyStars(isStarred, id);
		};

		function updateReadonlyStars(isStarred, id) {
			var $stars = $('#starC'+id+',#starD'+id);
			$stars.html(isStarred? star : '');
		};

		function starToggle(c,id) {
			if (!Nabble.userId) {
				if( confirm("You must log in to star this item.\nWould you like to login now?") ) {
					parent.location = "/template/NamlServlet.jtp?macro=login_page&nextUrl="+encodeURIComponent(parent.location) + Nabble.getClientID();
				}
				return;
			}
			var $img = $('#img-star'+c+id);
			var isStarred = $img.attr('src') == starredImg.src;
			isStarred = !isStarred;
			var descendants = c == 'A';
			var path = "/template/NamlServlet.jtp?node=" + id;
			if( descendants && !isStarred )
				path += "&macro=clear_descendant_stars";
			else
				path += "&macro=set_star&star=" + isStarred;
			$.getScript(path + Nabble.getClientID(), function() {
				starShow(isStarred,c,id);
			});
		};
	</script><script type="text/javascript">
      var site_admins = [241191];
    </script><script type="text/javascript">
			Nabble.nViews = function(id, views) {
				var $v = $('#v'+id);
				var pos = views=='1'?0:1;
				var t = $v.html()? $v.html().split('|')[pos]:'';
				$v.html(t == ''? views : t.replace(/%1/g,views)).show();
			};
		</script><style type="text/css">
			img.report-flag {
				vertical-align:middle;
				cursor: pointer;
			}
			#report-inappropriate-content {
				position: fixed;
				z-index:9999;
				display:none;
				padding:1.5em;
				left:8%;
				right:8%;
				top:8%;
				background-color:#555;
			}
			#report-inappropriate-content-inner { padding:.5em; }
			#report-inappropriate-content-inner div.big {
				height:5em;
				padding-top:2em;
				text-align:center;
				font-size:250%;
			}
			#report-inappropriate-content-inner div.big2 { font-size:70%; }
			div.inappropriate-option { margin:.5em 0; }
		</style>
		<script type="text/javascript">
			var reportNodeId = null;
			Nabble.reportContent = function(nodeId) {
				reportNodeId = nodeId;
				$('#report-inappropriate-content').show();
				var url = '/template/NamlServlet.jtp?macro=report_inappropriate_content_form';
				$.get(url, function(data) {
					$('#report-inappropriate-content-inner').html(data);
				});
			}
			Nabble.closeReport = function() {
				$('#report-inappropriate-content').hide();
			}
			Nabble.sendReport = function() {
				$('#send-report-button').attr('disabled','true').addClass('toolbar-disabled');
				var type = $('input[name=report_type]:checked').val();
				var url = '/template/NamlServlet.jtp?macro=report_inappropriate_content_submit&node='+reportNodeId+'&type='+type+Nabble.getClientID();
				$.get(url, function(data) {
					var h = 'Thank You';
					h += '<div class="weak-color big2">We will review your report soon.</div>';
					h += '<a href="javascript: void Nabble.closeReport()">Close</a>';
					$('#report-inappropriate-content-inner').html('<div class="big">'+h+'</div>');
				});
			}
		</script>
					<script type="text/javascript">
		Nabble.setFontSize();
		
	</script>
				<script type="text/javascript" src="Dynamic-code-reloading-td2087963_files/VisitCounter.html"></script></head><body>
					<div id="notice" class="notice rounded-bottom"></div>
					<div class="nabble macro_classic_forum_topic" id="nabble">
						
			
			<div class="top-bar">
		<div class="breadcrumbs" style="float: left;">
			<span id="breadcrumbs" class="weak-color nowrap">
		<a href="http://erlang.2086793.n4.nabble.com/">Erlang</a>
							<span> › </span>
					<a href="http://erlang.2086793.n4.nabble.com/Erlang-Questions-f2086794.html">Erlang Questions</a>
	</span>
		</div>
		<div style="text-align: right;">
			<span style="white-space: nowrap;" id="nabble-user-header"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=login_page&amp;nextUrl=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-td2087963.html">Login</a>&nbsp;&nbsp;<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=start_registration_page&amp;nextUrl=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-td2087963.html">Register</a></span>
	<script type="text/javascript">Nabble.userHeader();</script>
		</div>
	</div>
			
			<div id="nabble-newsflash" class="info-message" style="display: none; padding: 0.5em; margin-bottom: 0.5em;"></div>
	
			<h1 id="post-title" style="margin: 0.25em 0pt 0.8em;">
		Dynamic code reloading
	</h1>
			<div style="margin: 1.2em 0pt 5em;">
		<div id="topics-controls-left" class="float-left nowrap">
			<table>
		<tbody><tr>
			<td style="padding-right: 0.1em;">
		<img src="Dynamic-code-reloading-td2087963_files/view-classic.gif" style="border: medium none;" alt="classic" height="18" width="18">
	</td>

	<td style="padding-right: 1.1em;">
		Classic
	</td>

			<td style="padding-right: 0.1em;">
		<a href="javascript:void(0)" onclick="Nabble.setView('list', '/Dynamic-code-reloading-tc2087963.html',null)"><img src="Dynamic-code-reloading-td2087963_files/view-list.gif" style="border: medium none;" alt="list" height="18" width="18"></a>
	</td>

	<td style="padding-right: 1.1em;">
		<a href="javascript:void(0)" onclick="Nabble.setView('list', '/Dynamic-code-reloading-tc2087963.html',null)">List</a>
	</td>

			<td style="padding-right: 0.1em;">
		<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html',null)"><img src="Dynamic-code-reloading-td2087963_files/view-threaded.gif" style="border: medium none;" alt="threaded" height="18" width="18"></a>
	</td>

	<td style="padding-right: 1.1em;">
		<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html',null)">Threaded</a>
	</td>
		</tr>
	</tbody></table>
		</div>
		<div id="topics-controls-right" class="float-right nowrap" style="padding-top: 0.3em;">
			<span style="padding-right: 1em; height: 21px;">
		<img id="pin-icon" src="Dynamic-code-reloading-td2087963_files/pin.png" title="This topic has been pinned in Erlang Questions." style="vertical-align: middle; display: none;" height="21" width="20">
		<div id="tooltip33277" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip33277'));
	</script>
	</span>
	<span id="lock-icon" class="weak-color" style="padding: 0pt 0.5em; margin-right: 0.5em; display: none;">
		<img src="Dynamic-code-reloading-td2087963_files/lock_sm.png" style="vertical-align: middle;" height="15" width="10"> Locked
	</span>
	<span style="padding-right: 1em;">
		6 messages
	</span>
	<img src="Dynamic-code-reloading-td2087963_files/gear.png" class="image16" alt="Options">
	<span id="dd_topicdropdown"><span id="topicdropdown" class="dropdown"><a href="javascript:void(0)" title="Click for more options">Options</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingtopicdropdown" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpantopicdropdown">Loading...</span></td></tr><tr id="topicSubscriptionLink"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=subscribe&amp;node=2087963" rel="nofollow">Subscribe via email</a></td></tr><tr class="dropdown-separator"><td class="action-separator medium-border-color">&nbsp;</td></tr><tr id="moveTopic" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087963" rel="nofollow">Move topic</a></td></tr><tr id="pinTopic" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void%20Nabble.pinTopic(2087963)" rel="nofollow">Pin topic</a></td></tr><tr id="unpinTopic" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void%20Nabble.unpinTopic(2087963)" rel="nofollow">Unpin topic</a></td></tr><tr id="lockTopic" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void%20Nabble.lockTopic(2087963)" rel="nofollow">Lock topic</a></td></tr><tr id="unlockTopic" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void%20Nabble.unlockTopic(2087963)" rel="nofollow">Unlock topic</a></td></tr><tr id="deleteRecursively" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087963)" rel="nofollow">Delete this topic</a></td></tr><tr id="deletePost" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087963)" rel="nofollow">Delete this topic</a></td></tr><tr id="changeMetaTags" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_title_and_meta_tags&amp;node=2087963" rel="nofollow">Change title and meta tags</a></td></tr><tr id="embedPost2087963"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/embed/EmbedOptions.jtp?node=2087963" rel="nofollow">Embed post</a></td></tr><tr id="permalink2087963"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087963.html')">Permalink</a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("topicdropdown", "Options","Click for more options");
		dropdown.add('topicSubscriptionLink', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dsubscribe&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3ESubscribe via email\x3C/a\x3E');
		dropdown.addSeparator();
		dropdown.add('moveTopic', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3EMove topic\x3C/a\x3E', 'display:none');
		dropdown.add('pinTopic', '\x3Ca href\x3D\"javascript: void Nabble.pinTopic(2087963)\" rel\x3D\"nofollow\"\x3EPin topic\x3C/a\x3E', 'display:none');
		dropdown.add('unpinTopic', '\x3Ca href\x3D\"javascript: void Nabble.unpinTopic(2087963)\" rel\x3D\"nofollow\"\x3EUnpin topic\x3C/a\x3E', 'display:none');
		dropdown.add('lockTopic', '\x3Ca href\x3D\"javascript: void Nabble.lockTopic(2087963)\" rel\x3D\"nofollow\"\x3ELock topic\x3C/a\x3E', 'display:none');
		dropdown.add('unlockTopic', '\x3Ca href\x3D\"javascript: void Nabble.unlockTopic(2087963)\" rel\x3D\"nofollow\"\x3EUnlock topic\x3C/a\x3E', 'display:none');
		dropdown.add('deleteRecursively', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087963)\" rel\x3D\"nofollow\"\x3EDelete this topic\x3C/a\x3E', 'display:none');
			dropdown.add('deletePost', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087963)\" rel\x3D\"nofollow\"\x3EDelete this topic\x3C/a\x3E', 'display:none');
		dropdown.add('changeMetaTags', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_title_and_meta_tags&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3EChange title and meta tags\x3C/a\x3E', 'display:none');
		dropdown.add('embedPost2087963', '\x3Ca href\x3D\"/embed/EmbedOptions.jtp?node\x3D2087963\" rel\x3D\"nofollow\"\x3EEmbed post\x3C/a\x3E');
		dropdown.add('permalink2087963', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087963.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.build('dd_topicdropdown');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=topic_dropdown_later&node=2087963' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
		</div>
	</div>
			<div id="topic-contents" style="margin-top: 1em; clear: both;">
		<div id="classic-contents">
		
		<div class="classic-row">
		<div class="classic-header">
			<div class="classic-bar shaded-bg-color rounded-top">
				<div class="classic-author-name nowrap">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=50138">Deryk Barker</a>
				</div>
				<div class="classic-right-menu shaded-bg-color weak-color">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=reply&amp;node=2087963" rel="nofollow">Reply</a> |
					<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html',2087963)">Threaded</a>
	<div id="tooltip4808" class="nabble-tooltip rounded" use_title="false">
		Open this post in threaded view
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip4808'));
	</script> |
					<span id="dd_postdropdown2087963"><span id="postdropdown2087963" class="dropdown"><a href="javascript:void(0)" title="Click for more options">More</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingpostdropdown2087963" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpanpostdropdown2087963">Loading...</span></td></tr><tr id="replyToAuthor2087963" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=pm&amp;post=2087963" rel="nofollow">Reply to author</a></td></tr><tr id="editPost2087963" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=edit_post&amp;node=2087963" rel="nofollow">Edit post</a></td></tr><tr id="movePost2087963" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087963" rel="nofollow">Move post</a></td></tr><tr id="deletePost2087963" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087963)" rel="nofollow">Delete this post</a></td></tr><tr id="deleteRecursively2087963" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087963)" rel="nofollow">Delete this post and replies</a></td></tr><tr id="changePostDate2087963" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_post_date&amp;node=2087963" rel="nofollow">Change post date</a></td></tr><tr id="print2087963"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=print_post&amp;node=2087963" rel="nofollow">Print post</a></td></tr><tr id="permalink2087963"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087963.html')">Permalink</a></td></tr><tr id="rawMail2087963" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=raw_mail&amp;node=2087963" rel="nofollow">Raw mail</a></td></tr><tr id="social2087963" style="white-space: nowrap;"><td style="border: medium none;"><a href="http://twitter.com/share?text=Dynamic+code+reloading&amp;related=Erlang&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html" title="Twitter" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/twitter.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;t=Dynamic+code+reloading" title="Facebook" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/facebook.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://del.icio.us/post?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title=Dynamic+code+reloading" title="Delicious" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/delicious.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.google.com/bookmarks/mark?op=add&amp;bkmk=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title=Dynamic+code+reloading" title="Google Bookmarks" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/google.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title=Dynamic+code+reloading" title="Stumble Upon" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/stumbleupon.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;source=Erlang" title="LinkedIn" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/linkedin.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title=Dynamic+code+reloading" title="Digg" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/digg.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("postdropdown2087963", "More","Click for more options");
		dropdown.add('replyToAuthor2087963', '\x3Ca href\x3D\"/user/SendEmail.jtp?type\x3Dpm&amp;post\x3D2087963\" rel\x3D\"nofollow\"\x3EReply to author\x3C/a\x3E', 'display:none');
		dropdown.add('editPost2087963', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dedit_post&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3EEdit post\x3C/a\x3E', 'display:none');
		dropdown.add('movePost2087963', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3EMove post\x3C/a\x3E', 'display:none');
		dropdown.add('deletePost2087963', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087963)\" rel\x3D\"nofollow\"\x3EDelete this post\x3C/a\x3E', 'display:none');
			dropdown.add('deleteRecursively2087963', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087963)\" rel\x3D\"nofollow\"\x3EDelete this post and replies\x3C/a\x3E', 'display:none');
		dropdown.add('changePostDate2087963', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_post_date&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3EChange post date\x3C/a\x3E', 'display:none');
		dropdown.add('print2087963', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dprint_post&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3EPrint post\x3C/a\x3E');
		dropdown.add('permalink2087963', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087963.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.add('rawMail2087963', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Draw_mail&amp;node\x3D2087963\" rel\x3D\"nofollow\"\x3ERaw mail\x3C/a\x3E', 'display:none');
		dropdown.add('social2087963', '\x3Ca href\x3D\"http://twitter.com/share?text\x3DDynamic+code+reloading&amp;related\x3DErlang&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html\" title\x3D\"Twitter\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/twitter.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.facebook.com/share.php?v\x3D4&amp;src\x3Dbm&amp;u\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;t\x3DDynamic+code+reloading\" title\x3D\"Facebook\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/facebook.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://del.icio.us/post?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title\x3DDynamic+code+reloading\" title\x3D\"Delicious\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/delicious.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.google.com/bookmarks/mark?op\x3Dadd&amp;bkmk\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title\x3DDynamic+code+reloading\" title\x3D\"Google Bookmarks\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/google.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.stumbleupon.com/submit?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title\x3DDynamic+code+reloading\" title\x3D\"Stumble Upon\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/stumbleupon.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.linkedin.com/shareArticle?mini\x3Dtrue&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;source\x3DErlang\" title\x3D\"LinkedIn\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/linkedin.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://digg.com/submit?phase\x3D2&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087963.html&amp;title\x3DDynamic+code+reloading\" title\x3D\"Digg\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/digg.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E','white-space:nowrap');
		dropdown.build('dd_postdropdown2087963');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=post_dropdown_later&node=2087963' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
					&nbsp;
					<img src="Dynamic-code-reloading-td2087963_files/flag_gray.png" class="report-flag" onclick="Nabble.reportContent(2087963)">
	<div id="tooltip99838" class="nabble-tooltip rounded" use_title="false">
		Report Content as Inappropriate
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip99838'));
	</script>
					<span style="cursor: pointer;" id="starB2087963">
		<img id="img-starB2087963" src="Dynamic-code-reloading-td2087963_files/icon_unstarred.png" class="star" alt="star" title="Add this item to your favorites list">
		<div id="tooltip26797" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip26797'));
	</script>
	</span>
	
				</div>
				<div class="classic-subject-line">
					<span id="red-arrow2087963" class="float-left invisible" style="margin-top: 0.2em; display: inline;">
		<img title="Selected post" src="Dynamic-code-reloading-td2087963_files/arrow.png" alt="Selected post" height="15" width="15">
	</span>
					<span class="post-date float-left">
		<span id="d1271734642000-399">Apr 20, 2010; 12:37am</span><script type="text/javascript">
		Nabble.get('d1271734642000-399').innerHTML= Nabble.formatDateLong(new Date(1271734642000));
	</script>
	</span>
					<h2 class="post-subject float-left" style="width: 30%; overflow: visible; font-family: inherit;">
		Dynamic code reloading
	</h2>
				</div>
			</div>
		</div>
		<table class="classic-body">
			<tbody><tr>
				<td class="classic-author shaded-bg-color rounded-bottom">
					<div class="avatar-outer">
		<div class="avatar-inner">
			<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=50138" rel="nofollow" title="View profile of Deryk Barker" class="nowrap no-decoration"><img class="avatar medium-border-color" src="Dynamic-code-reloading-td2087963_files/301817725d79f38c673b578f14cbac50.png" alt="Deryk Barker" title="Deryk Barker" height="100" width="100"><img src="Dynamic-code-reloading-td2087963_files/online.png" class="online50138 online invisible" title="User is online" alt="online"></a>

	
	
		</div>
	</div>
	
	
	<div class="post-count50138 avatar-label weak-color">17 posts</div>
	
				</td>
				<td class="classic-message">
					
	
	
	<div class="message-text">
		Please excuse me if this is a daft question...and I am sure there are 
<br>OTP functions to do all this for you, but I wanted &nbsp;to show my students 
<br>some features of "pure" erlang.
<br><br>Specifically, I'd like to have a server that can call the latest version 
<br>of itself in response to a message.
<br><br>Based on my reading of the "old" erlang book (the OOP, sorry out of 
<br>print, one), it seemed that having a receive pattern something like:
<br><br>&nbsp; &nbsp; {dbase, Pid, reload} -&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; reply (Pid, reloading),
<br>&nbsp; &nbsp; &nbsp; &nbsp; dbase:loop (DataBase);
<br><br>would work. (It's a *very* simple database server in a module called dbase).
<br><br>Unfortunately, this doesn't cause the new BEAM file, compiled outside 
<br>the erlang shell, to be loaded.
<br><br>OK, try compiling in the erlang shell (server is running under same 
<br>shell), but this takes down the server &nbsp;- silently. I know it's gone 
<br>because its registered name (dbserver) is no longer in the registered 
<br>name table.
<br><br>Perhaps I need to use code:load_file/1?
<br><br>But that tells me the module needs to be purged first.
<br><br>code:soft_purge/1 (which, according to the documentation, leaves 
<br>existing processes running the module running) fails - with a not_purged 
<br>error - and code:purge/1 works fine, but takes down the server.
<br><br>Can anyone tell me how I should be doing this and just how dim I am being?
<br><br>thanks,
<br><br>deryk
<br><br>-- 
<br>|Deryk Barker, Computer Science Dept. | Music does not have to be understood|
<br>|Camosun College, Victoria, BC, Canada| It has to be listened to. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
<br>|email: <a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087963&amp;i=0" target="_top" rel="nofollow" link="external">[hidden email]</a>
 &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; |
<br>|phone: +1 250 370 4452 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; Hermann Scherchen. &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp;|
<br><br><br><br>________________________________________________________________
<br>erlang-questions (at) erlang.org mailing list.
<br>See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087963&amp;i=1" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br><br>
	
	</div>
				</td>
			</tr>
		</tbody></table>
	</div>
	
	<div class="ad shaded-bg-color rounded" style="display: block; margin: 0pt 0pt 1em; padding: 0.5em;">
						<script type="text/javascript">
							if (Nabble.ads)
								Nabble.ads('null', '');
						</script><a id="ad0.26590752579329746" href="#" style="display: none;">sample</a>
<script type="text/javascript" src="Dynamic-code-reloading-td2087963_files/show_ads.js"></script><ins style="display: inline-table; border: medium none; height: 90px; margin: 0pt; padding: 0pt; position: relative; visibility: visible; width: 728px;"><ins id="aswift_0_anchor" style="display: block; border: medium none; height: 90px; margin: 0pt; padding: 0pt; position: relative; visibility: visible; width: 728px;"><iframe allowtransparency="true" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+='.call';setTimeout(h,0)}else if(h.match){i+='.nav';w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" vspace="0" id="aswift_0" name="aswift_0" style="left: 0pt; position: absolute; top: 0pt;" frameborder="0" height="90" scrolling="no" width="728"></iframe></ins></ins>
						<div class="remove-ads-link invisible" style="margin-top: 0.3em; font-size: 90%;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=remove_ads_page">Remove Ads</a></div>
					</div>
			<script type="text/javascript">
    $(document).ready(function() {
      if (Nabble.userId && site_admins.indexOf(Number(Nabble.userId)) >= 0)
        $('div.remove-ads-link').show();
    });
  </script><div class="classic-row">
		<div class="classic-header">
			<div class="classic-bar shaded-bg-color rounded-top">
				<div class="classic-author-name nowrap">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=32926">Jeffm-3</a>
				</div>
				<div class="classic-right-menu shaded-bg-color weak-color">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=reply&amp;node=2087964" rel="nofollow">Reply</a> |
					<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html#a2087964',2087964)">Threaded</a>
	<div id="tooltip94347" class="nabble-tooltip rounded" use_title="false">
		Open this post in threaded view
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip94347'));
	</script> |
					<span id="dd_postdropdown2087964"><span id="postdropdown2087964" class="dropdown"><a href="javascript:void(0)" title="Click for more options">More</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingpostdropdown2087964" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpanpostdropdown2087964">Loading...</span></td></tr><tr id="replyToAuthor2087964" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=pm&amp;post=2087964" rel="nofollow">Reply to author</a></td></tr><tr id="editPost2087964" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=edit_post&amp;node=2087964" rel="nofollow">Edit post</a></td></tr><tr id="movePost2087964" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087964" rel="nofollow">Move post</a></td></tr><tr id="deletePost2087964" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087964)" rel="nofollow">Delete this post</a></td></tr><tr id="deleteRecursively2087964" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087964)" rel="nofollow">Delete this post and replies</a></td></tr><tr id="changePostDate2087964" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_post_date&amp;node=2087964" rel="nofollow">Change post date</a></td></tr><tr id="print2087964"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=print_post&amp;node=2087964" rel="nofollow">Print post</a></td></tr><tr id="permalink2087964"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087964.html')">Permalink</a></td></tr><tr id="rawMail2087964" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=raw_mail&amp;node=2087964" rel="nofollow">Raw mail</a></td></tr><tr id="social2087964" style="white-space: nowrap;"><td style="border: medium none;"><a href="http://twitter.com/share?text=Re%3A+Dynamic+code+reloading&amp;related=Erlang&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html" title="Twitter" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/twitter.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;t=Re%3A+Dynamic+code+reloading" title="Facebook" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/facebook.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://del.icio.us/post?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title=Re%3A+Dynamic+code+reloading" title="Delicious" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/delicious.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.google.com/bookmarks/mark?op=add&amp;bkmk=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title=Re%3A+Dynamic+code+reloading" title="Google Bookmarks" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/google.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title=Re%3A+Dynamic+code+reloading" title="Stumble Upon" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/stumbleupon.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;source=Erlang" title="LinkedIn" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/linkedin.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title=Re%3A+Dynamic+code+reloading" title="Digg" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/digg.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("postdropdown2087964", "More","Click for more options");
		dropdown.add('replyToAuthor2087964', '\x3Ca href\x3D\"/user/SendEmail.jtp?type\x3Dpm&amp;post\x3D2087964\" rel\x3D\"nofollow\"\x3EReply to author\x3C/a\x3E', 'display:none');
		dropdown.add('editPost2087964', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dedit_post&amp;node\x3D2087964\" rel\x3D\"nofollow\"\x3EEdit post\x3C/a\x3E', 'display:none');
		dropdown.add('movePost2087964', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087964\" rel\x3D\"nofollow\"\x3EMove post\x3C/a\x3E', 'display:none');
		dropdown.add('deletePost2087964', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087964)\" rel\x3D\"nofollow\"\x3EDelete this post\x3C/a\x3E', 'display:none');
			dropdown.add('deleteRecursively2087964', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087964)\" rel\x3D\"nofollow\"\x3EDelete this post and replies\x3C/a\x3E', 'display:none');
		dropdown.add('changePostDate2087964', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_post_date&amp;node\x3D2087964\" rel\x3D\"nofollow\"\x3EChange post date\x3C/a\x3E', 'display:none');
		dropdown.add('print2087964', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dprint_post&amp;node\x3D2087964\" rel\x3D\"nofollow\"\x3EPrint post\x3C/a\x3E');
		dropdown.add('permalink2087964', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087964.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.add('rawMail2087964', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Draw_mail&amp;node\x3D2087964\" rel\x3D\"nofollow\"\x3ERaw mail\x3C/a\x3E', 'display:none');
		dropdown.add('social2087964', '\x3Ca href\x3D\"http://twitter.com/share?text\x3DRe%3A+Dynamic+code+reloading&amp;related\x3DErlang&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html\" title\x3D\"Twitter\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/twitter.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.facebook.com/share.php?v\x3D4&amp;src\x3Dbm&amp;u\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;t\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Facebook\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/facebook.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://del.icio.us/post?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Delicious\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/delicious.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.google.com/bookmarks/mark?op\x3Dadd&amp;bkmk\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Google Bookmarks\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/google.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.stumbleupon.com/submit?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Stumble Upon\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/stumbleupon.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.linkedin.com/shareArticle?mini\x3Dtrue&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;source\x3DErlang\" title\x3D\"LinkedIn\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/linkedin.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://digg.com/submit?phase\x3D2&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087964.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Digg\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/digg.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E','white-space:nowrap');
		dropdown.build('dd_postdropdown2087964');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=post_dropdown_later&node=2087964' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
					&nbsp;
					<img src="Dynamic-code-reloading-td2087963_files/flag_gray.png" class="report-flag" onclick="Nabble.reportContent(2087964)">
	<div id="tooltip29294" class="nabble-tooltip rounded" use_title="false">
		Report Content as Inappropriate
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip29294'));
	</script>
					<span style="cursor: pointer;" id="starB2087964">
		<img id="img-starB2087964" src="Dynamic-code-reloading-td2087963_files/icon_unstarred.png" class="star" alt="star" title="Add this item to your favorites list">
		<div id="tooltip98182" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip98182'));
	</script>
	</span>
	
				</div>
				<div class="classic-subject-line">
					<span id="red-arrow2087964" class="float-left invisible" style="margin-top: 0.2em;">
		<img title="Selected post" src="Dynamic-code-reloading-td2087963_files/arrow.png" alt="Selected post" height="15" width="15">
	</span>
					<span class="post-date float-left">
		<span id="d1271736690000-211">Apr 20, 2010; 1:11am</span><script type="text/javascript">
		Nabble.get('d1271736690000-211').innerHTML= Nabble.formatDateLong(new Date(1271736690000));
	</script>
	</span>
					<h2 class="post-subject float-left" style="width: 30%; overflow: visible; font-family: inherit;">
		Re: Dynamic code reloading
	</h2>
				</div>
			</div>
		</div>
		<table class="classic-body">
			<tbody><tr>
				<td class="classic-author shaded-bg-color rounded-bottom">
					<div class="avatar-outer">
		<div class="avatar-inner">
			<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=32926" rel="nofollow" title="View profile of Jeffm-3" class="nowrap no-decoration"><img class="avatar medium-border-color" src="Dynamic-code-reloading-td2087963_files/28bb07a60e74c2467cc944364fe4075a.png" alt="Jeffm-3" title="Jeffm-3" height="100" width="100"><img src="Dynamic-code-reloading-td2087963_files/online.png" class="online32926 online invisible" title="User is online" alt="online"></a>

	
	
		</div>
	</div>
	
	
	<div class="post-count32926 avatar-label weak-color">192 posts</div>
	
				</td>
				<td class="classic-message">
					
	
	
	<div class="message-text">
		When you loaded the new module in the shell did you use c() or l(dbase)? 
<br>If you compiled external to the shell, as you stated, you'll need to use 
<br>l(module_name) to tell the shell to load the new version.
<br><br>Jeff.
<br><br>On 20/04/10 1:37 PM, Deryk Barker wrote:
<div style="height: 170px; overflow-y: hidden;" class="shrinkable-quote"><br>&gt; Please excuse me if this is a daft question...and I am sure there are 
<br>&gt; OTP functions to do all this for you, but I wanted &nbsp;to show my 
<br>&gt; students some features of "pure" erlang.
<br>&gt;
<br>&gt; Specifically, I'd like to have a server that can call the latest 
<br>&gt; version of itself in response to a message.
<br>&gt;
<br>&gt; Based on my reading of the "old" erlang book (the OOP, sorry out of 
<br>&gt; print, one), it seemed that having a receive pattern something like:
<br>&gt;
<br>&gt; &nbsp; &nbsp;{dbase, Pid, reload} -&gt;
<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp;reply (Pid, reloading),
<br>&gt; &nbsp; &nbsp; &nbsp; &nbsp;dbase:loop (DataBase);
<br>&gt;
<br>&gt; would work. (It's a *very* simple database server in a module called 
<br>&gt; dbase).
<br>&gt;
<br>&gt; Unfortunately, this doesn't cause the new BEAM file, compiled outside 
<br>&gt; the erlang shell, to be loaded.
<br>&gt;
<br>&gt; OK, try compiling in the erlang shell (server is running under same 
<br>&gt; shell), but this takes down the server &nbsp;- silently. I know it's gone 
<br>&gt; because its registered name (dbserver) is no longer in the registered 
<br>&gt; name table.
<br>&gt;
<br>&gt; Perhaps I need to use code:load_file/1?
<br>&gt;
<br>&gt; But that tells me the module needs to be purged first.
<br>&gt;
<br>&gt; code:soft_purge/1 (which, according to the documentation, leaves 
<br>&gt; existing processes running the module running) fails - with a 
<br>&gt; not_purged error - and code:purge/1 works fine, but takes down the 
<br>&gt; server.
<br>&gt;
<br>&gt; Can anyone tell me how I should be doing this and just how dim I am 
<br>&gt; being?
<br>&gt;
<br>&gt; thanks,
<br>&gt;
<br>&gt; deryk
<br>&gt;
</div><div class="shrink-quote"><span>...</span> [<a href="#">show rest of quote</a>]</div><br><br>________________________________________________________________
<br>erlang-questions (at) erlang.org mailing list.
<br>See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087964&amp;i=0" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br><br>
	
	</div>
				</td>
			</tr>
		</tbody></table>
	</div>
	
	<div class="classic-row">
		<div class="classic-header">
			<div class="classic-bar shaded-bg-color rounded-top">
				<div class="classic-author-name nowrap">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=50138">Deryk Barker</a>
				</div>
				<div class="classic-right-menu shaded-bg-color weak-color">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=reply&amp;node=2087965" rel="nofollow">Reply</a> |
					<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html#a2087965',2087965)">Threaded</a>
	<div id="tooltip82785" class="nabble-tooltip rounded" use_title="false">
		Open this post in threaded view
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip82785'));
	</script> |
					<span id="dd_postdropdown2087965"><span id="postdropdown2087965" class="dropdown"><a href="javascript:void(0)" title="Click for more options">More</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingpostdropdown2087965" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpanpostdropdown2087965">Loading...</span></td></tr><tr id="replyToAuthor2087965" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=pm&amp;post=2087965" rel="nofollow">Reply to author</a></td></tr><tr id="editPost2087965" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=edit_post&amp;node=2087965" rel="nofollow">Edit post</a></td></tr><tr id="movePost2087965" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087965" rel="nofollow">Move post</a></td></tr><tr id="deletePost2087965" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087965)" rel="nofollow">Delete this post</a></td></tr><tr id="deleteRecursively2087965" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087965)" rel="nofollow">Delete this post and replies</a></td></tr><tr id="changePostDate2087965" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_post_date&amp;node=2087965" rel="nofollow">Change post date</a></td></tr><tr id="print2087965"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=print_post&amp;node=2087965" rel="nofollow">Print post</a></td></tr><tr id="permalink2087965"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087965.html')">Permalink</a></td></tr><tr id="rawMail2087965" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=raw_mail&amp;node=2087965" rel="nofollow">Raw mail</a></td></tr><tr id="social2087965" style="white-space: nowrap;"><td style="border: medium none;"><a href="http://twitter.com/share?text=Re%3A+Dynamic+code+reloading&amp;related=Erlang&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html" title="Twitter" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/twitter.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;t=Re%3A+Dynamic+code+reloading" title="Facebook" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/facebook.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://del.icio.us/post?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title=Re%3A+Dynamic+code+reloading" title="Delicious" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/delicious.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.google.com/bookmarks/mark?op=add&amp;bkmk=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title=Re%3A+Dynamic+code+reloading" title="Google Bookmarks" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/google.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title=Re%3A+Dynamic+code+reloading" title="Stumble Upon" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/stumbleupon.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;source=Erlang" title="LinkedIn" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/linkedin.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title=Re%3A+Dynamic+code+reloading" title="Digg" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/digg.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("postdropdown2087965", "More","Click for more options");
		dropdown.add('replyToAuthor2087965', '\x3Ca href\x3D\"/user/SendEmail.jtp?type\x3Dpm&amp;post\x3D2087965\" rel\x3D\"nofollow\"\x3EReply to author\x3C/a\x3E', 'display:none');
		dropdown.add('editPost2087965', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dedit_post&amp;node\x3D2087965\" rel\x3D\"nofollow\"\x3EEdit post\x3C/a\x3E', 'display:none');
		dropdown.add('movePost2087965', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087965\" rel\x3D\"nofollow\"\x3EMove post\x3C/a\x3E', 'display:none');
		dropdown.add('deletePost2087965', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087965)\" rel\x3D\"nofollow\"\x3EDelete this post\x3C/a\x3E', 'display:none');
			dropdown.add('deleteRecursively2087965', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087965)\" rel\x3D\"nofollow\"\x3EDelete this post and replies\x3C/a\x3E', 'display:none');
		dropdown.add('changePostDate2087965', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_post_date&amp;node\x3D2087965\" rel\x3D\"nofollow\"\x3EChange post date\x3C/a\x3E', 'display:none');
		dropdown.add('print2087965', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dprint_post&amp;node\x3D2087965\" rel\x3D\"nofollow\"\x3EPrint post\x3C/a\x3E');
		dropdown.add('permalink2087965', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087965.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.add('rawMail2087965', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Draw_mail&amp;node\x3D2087965\" rel\x3D\"nofollow\"\x3ERaw mail\x3C/a\x3E', 'display:none');
		dropdown.add('social2087965', '\x3Ca href\x3D\"http://twitter.com/share?text\x3DRe%3A+Dynamic+code+reloading&amp;related\x3DErlang&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html\" title\x3D\"Twitter\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/twitter.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.facebook.com/share.php?v\x3D4&amp;src\x3Dbm&amp;u\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;t\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Facebook\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/facebook.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://del.icio.us/post?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Delicious\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/delicious.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.google.com/bookmarks/mark?op\x3Dadd&amp;bkmk\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Google Bookmarks\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/google.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.stumbleupon.com/submit?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Stumble Upon\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/stumbleupon.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.linkedin.com/shareArticle?mini\x3Dtrue&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;source\x3DErlang\" title\x3D\"LinkedIn\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/linkedin.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://digg.com/submit?phase\x3D2&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087965.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Digg\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/digg.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E','white-space:nowrap');
		dropdown.build('dd_postdropdown2087965');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=post_dropdown_later&node=2087965' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
					&nbsp;
					<img src="Dynamic-code-reloading-td2087963_files/flag_gray.png" class="report-flag" onclick="Nabble.reportContent(2087965)">
	<div id="tooltip63488" class="nabble-tooltip rounded" use_title="false">
		Report Content as Inappropriate
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip63488'));
	</script>
					<span style="cursor: pointer;" id="starB2087965">
		<img id="img-starB2087965" src="Dynamic-code-reloading-td2087963_files/icon_unstarred.png" class="star" alt="star" title="Add this item to your favorites list">
		<div id="tooltip57486" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip57486'));
	</script>
	</span>
	
				</div>
				<div class="classic-subject-line">
					<span id="red-arrow2087965" class="float-left invisible" style="margin-top: 0.2em;">
		<img title="Selected post" src="Dynamic-code-reloading-td2087963_files/arrow.png" alt="Selected post" height="15" width="15">
	</span>
					<span class="post-date float-left">
		<span id="d1271744902000-736">Apr 20, 2010; 3:28am</span><script type="text/javascript">
		Nabble.get('d1271744902000-736').innerHTML= Nabble.formatDateLong(new Date(1271744902000));
	</script>
	</span>
					<h2 class="post-subject float-left" style="width: 30%; overflow: visible; font-family: inherit;">
		Re: Dynamic code reloading
	</h2>
				</div>
			</div>
		</div>
		<table class="classic-body">
			<tbody><tr>
				<td class="classic-author shaded-bg-color rounded-bottom">
					<div class="avatar-outer">
		<div class="avatar-inner">
			<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=50138" rel="nofollow" title="View profile of Deryk Barker" class="nowrap no-decoration"><img class="avatar medium-border-color" src="Dynamic-code-reloading-td2087963_files/301817725d79f38c673b578f14cbac50.png" alt="Deryk Barker" title="Deryk Barker" height="100" width="100"><img src="Dynamic-code-reloading-td2087963_files/online.png" class="online50138 online invisible" title="User is online" alt="online"></a>

	
	
		</div>
	</div>
	
	
	<div class="post-count50138 avatar-label weak-color">17 posts</div>
	
				</td>
				<td class="classic-message">
					
	
	
	<div class="message-text">
		Jeffm wrote:
<br>&gt; When you loaded the new module in the shell did you use c() or 
<br>&gt; l(dbase)? If you compiled external to the shell, as you stated, you'll 
<br>&gt; need to use l(module_name) to tell the shell to load the new version. 
<br>I tried c() which took down the server process. At your suggestion, I 
<br>just tried compiling externally and then used l().
<br><br>Which worked - the first time, i.e. when all I had done since starting 
<br>the erlang shell was spawn the server and register its name (which was 
<br>definitely in the list returned by registered()). When I recompiled 
<br>externally again and re-used l() it took down the server process...sigh.
<br><br>I don't understand what's going on here, my understanding of the manual 
<br>was that you can have two versions of a module loaded, the current and 
<br>the old, I should have expected, after the load, the running server to 
<br>be using the old. It successfully switched to the newly loaded code, via 
<br>the call dbase:loop(DataBase), the first time I tried this, so - again, 
<br>as I understand it - it was then using the current.
<br><br>When I did another load of the module (again using l()), the old old (as 
<br>it were) is purged and the current becomes the old.
<br>So why, if my server process was now running the (about to be old) 
<br>current was it terminated? And why silently?
<br><br>Any insight gratefully received.
<br><br>deryk
<br><br>-- 
<br>|Deryk Barker, Computer Science Dept. | Music does not have to be understood|
<br>|Camosun College, Victoria, BC, Canada| It has to be listened to. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
<br>|email: <a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087965&amp;i=0" target="_top" rel="nofollow" link="external">[hidden email]</a>
 &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; |
<br>|phone: +1 250 370 4452 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; Hermann Scherchen. &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp;|
<br><br><br><br>________________________________________________________________
<br>erlang-questions (at) erlang.org mailing list.
<br>See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087965&amp;i=1" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br><br>
	
	</div>
				</td>
			</tr>
		</tbody></table>
	</div>
	
	<div class="classic-row">
		<div class="classic-header">
			<div class="classic-bar shaded-bg-color rounded-top">
				<div class="classic-author-name nowrap">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=100905">Igor Ribeiro Sucupira</a>
				</div>
				<div class="classic-right-menu shaded-bg-color weak-color">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=reply&amp;node=2087968" rel="nofollow">Reply</a> |
					<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html#a2087968',2087968)">Threaded</a>
	<div id="tooltip5198" class="nabble-tooltip rounded" use_title="false">
		Open this post in threaded view
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip5198'));
	</script> |
					<span id="dd_postdropdown2087968"><span id="postdropdown2087968" class="dropdown"><a href="javascript:void(0)" title="Click for more options">More</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingpostdropdown2087968" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpanpostdropdown2087968">Loading...</span></td></tr><tr id="replyToAuthor2087968" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=pm&amp;post=2087968" rel="nofollow">Reply to author</a></td></tr><tr id="editPost2087968" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=edit_post&amp;node=2087968" rel="nofollow">Edit post</a></td></tr><tr id="movePost2087968" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087968" rel="nofollow">Move post</a></td></tr><tr id="deletePost2087968" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087968)" rel="nofollow">Delete this post</a></td></tr><tr id="deleteRecursively2087968" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087968)" rel="nofollow">Delete this post and replies</a></td></tr><tr id="changePostDate2087968" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_post_date&amp;node=2087968" rel="nofollow">Change post date</a></td></tr><tr id="print2087968"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=print_post&amp;node=2087968" rel="nofollow">Print post</a></td></tr><tr id="permalink2087968"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087968.html')">Permalink</a></td></tr><tr id="rawMail2087968" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=raw_mail&amp;node=2087968" rel="nofollow">Raw mail</a></td></tr><tr id="social2087968" style="white-space: nowrap;"><td style="border: medium none;"><a href="http://twitter.com/share?text=Re%3A+Dynamic+code+reloading&amp;related=Erlang&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html" title="Twitter" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/twitter.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;t=Re%3A+Dynamic+code+reloading" title="Facebook" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/facebook.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://del.icio.us/post?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title=Re%3A+Dynamic+code+reloading" title="Delicious" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/delicious.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.google.com/bookmarks/mark?op=add&amp;bkmk=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title=Re%3A+Dynamic+code+reloading" title="Google Bookmarks" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/google.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title=Re%3A+Dynamic+code+reloading" title="Stumble Upon" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/stumbleupon.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;source=Erlang" title="LinkedIn" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/linkedin.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title=Re%3A+Dynamic+code+reloading" title="Digg" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/digg.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("postdropdown2087968", "More","Click for more options");
		dropdown.add('replyToAuthor2087968', '\x3Ca href\x3D\"/user/SendEmail.jtp?type\x3Dpm&amp;post\x3D2087968\" rel\x3D\"nofollow\"\x3EReply to author\x3C/a\x3E', 'display:none');
		dropdown.add('editPost2087968', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dedit_post&amp;node\x3D2087968\" rel\x3D\"nofollow\"\x3EEdit post\x3C/a\x3E', 'display:none');
		dropdown.add('movePost2087968', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087968\" rel\x3D\"nofollow\"\x3EMove post\x3C/a\x3E', 'display:none');
		dropdown.add('deletePost2087968', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087968)\" rel\x3D\"nofollow\"\x3EDelete this post\x3C/a\x3E', 'display:none');
			dropdown.add('deleteRecursively2087968', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087968)\" rel\x3D\"nofollow\"\x3EDelete this post and replies\x3C/a\x3E', 'display:none');
		dropdown.add('changePostDate2087968', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_post_date&amp;node\x3D2087968\" rel\x3D\"nofollow\"\x3EChange post date\x3C/a\x3E', 'display:none');
		dropdown.add('print2087968', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dprint_post&amp;node\x3D2087968\" rel\x3D\"nofollow\"\x3EPrint post\x3C/a\x3E');
		dropdown.add('permalink2087968', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087968.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.add('rawMail2087968', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Draw_mail&amp;node\x3D2087968\" rel\x3D\"nofollow\"\x3ERaw mail\x3C/a\x3E', 'display:none');
		dropdown.add('social2087968', '\x3Ca href\x3D\"http://twitter.com/share?text\x3DRe%3A+Dynamic+code+reloading&amp;related\x3DErlang&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html\" title\x3D\"Twitter\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/twitter.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.facebook.com/share.php?v\x3D4&amp;src\x3Dbm&amp;u\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;t\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Facebook\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/facebook.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://del.icio.us/post?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Delicious\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/delicious.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.google.com/bookmarks/mark?op\x3Dadd&amp;bkmk\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Google Bookmarks\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/google.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.stumbleupon.com/submit?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Stumble Upon\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/stumbleupon.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.linkedin.com/shareArticle?mini\x3Dtrue&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;source\x3DErlang\" title\x3D\"LinkedIn\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/linkedin.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://digg.com/submit?phase\x3D2&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087968.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Digg\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/digg.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E','white-space:nowrap');
		dropdown.build('dd_postdropdown2087968');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=post_dropdown_later&node=2087968' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
					&nbsp;
					<img src="Dynamic-code-reloading-td2087963_files/flag_gray.png" class="report-flag" onclick="Nabble.reportContent(2087968)">
	<div id="tooltip26111" class="nabble-tooltip rounded" use_title="false">
		Report Content as Inappropriate
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip26111'));
	</script>
					<span style="cursor: pointer;" id="starB2087968">
		<img id="img-starB2087968" src="Dynamic-code-reloading-td2087963_files/icon_unstarred.png" class="star" alt="star" title="Add this item to your favorites list">
		<div id="tooltip86863" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip86863'));
	</script>
	</span>
	
				</div>
				<div class="classic-subject-line">
					<span id="red-arrow2087968" class="float-left invisible" style="margin-top: 0.2em;">
		<img title="Selected post" src="Dynamic-code-reloading-td2087963_files/arrow.png" alt="Selected post" height="15" width="15">
	</span>
					<span class="post-date float-left">
		<span id="d1271745086000-159">Apr 20, 2010; 3:31am</span><script type="text/javascript">
		Nabble.get('d1271745086000-159').innerHTML= Nabble.formatDateLong(new Date(1271745086000));
	</script>
	</span>
					<h2 class="post-subject float-left" style="width: 30%; overflow: visible; font-family: inherit;">
		Re: Dynamic code reloading
	</h2>
				</div>
			</div>
		</div>
		<table class="classic-body">
			<tbody><tr>
				<td class="classic-author shaded-bg-color rounded-bottom">
					<div class="avatar-outer">
		<div class="avatar-inner">
			<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=100905" rel="nofollow" title="View profile of Igor Ribeiro Sucupira" class="nowrap no-decoration"><img class="avatar medium-border-color" src="Dynamic-code-reloading-td2087963_files/43407552a8986456bb876d1c543fee6f.png" alt="Igor Ribeiro Sucupira" title="Igor Ribeiro Sucupira" height="100" width="100"><img src="Dynamic-code-reloading-td2087963_files/online.png" class="online100905 online invisible" title="User is online" alt="online"></a>

	
	
		</div>
	</div>
	
	
	<div class="post-count100905 avatar-label weak-color">119 posts</div>
	
				</td>
				<td class="classic-message">
					
	
	<div class="weak-color" style="font-size: 80%; padding-bottom: 1em;">
				In reply to <a href="http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087963.html" rel="nofollow">this post</a> by Deryk Barker
			</div>
	<div class="message-text">
		Once your server is up for the first time, you can use those steps to
<br>update the module after every change in the beam file:
<br>- Call code:soft_purge(dbase).
<br>- Call code:load_file(dbase).
<br>- Send a message {dbase, self(), reload} to the server.
<br><br>Igor.
<br><br>On Tue, Apr 20, 2010 at 12:37 AM, Deryk Barker &lt;<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087968&amp;i=0" target="_top" rel="nofollow" link="external">[hidden email]</a>&gt; wrote:
<div style="height: 170px; overflow-y: hidden;" class="shrinkable-quote"><br>&gt; Please excuse me if this is a daft question...and I am sure there are OTP
<br>&gt; functions to do all this for you, but I wanted &nbsp;to show my students some
<br>&gt; features of "pure" erlang.
<br>&gt;
<br>&gt; Specifically, I'd like to have a server that can call the latest version of
<br>&gt; itself in response to a message.
<br>&gt;
<br>&gt; Based on my reading of the "old" erlang book (the OOP, sorry out of print,
<br>&gt; one), it seemed that having a receive pattern something like:
<br>&gt;
<br>&gt; &nbsp; {dbase, Pid, reload} -&gt;
<br>&gt; &nbsp; &nbsp; &nbsp; reply (Pid, reloading),
<br>&gt; &nbsp; &nbsp; &nbsp; dbase:loop (DataBase);
<br>&gt;
<br>&gt; would work. (It's a *very* simple database server in a module called dbase).
<br>&gt;
<br>&gt; Unfortunately, this doesn't cause the new BEAM file, compiled outside the
<br>&gt; erlang shell, to be loaded.
<br>&gt;
<br>&gt; OK, try compiling in the erlang shell (server is running under same shell),
<br>&gt; but this takes down the server &nbsp;- silently. I know it's gone because its
<br>&gt; registered name (dbserver) is no longer in the registered name table.
<br>&gt;
<br>&gt; Perhaps I need to use code:load_file/1?
<br>&gt;
<br>&gt; But that tells me the module needs to be purged first.
<br>&gt;
<br>&gt; code:soft_purge/1 (which, according to the documentation, leaves existing
<br>&gt; processes running the module running) fails - with a not_purged error - and
<br>&gt; code:purge/1 works fine, but takes down the server.
<br>&gt;
<br>&gt; Can anyone tell me how I should be doing this and just how dim I am being?
<br>&gt;
<br>&gt; thanks,
<br>&gt;
<br>&gt; deryk
<br>&gt;
<br>&gt; --
<br>&gt; |Deryk Barker, Computer Science Dept. | Music does not have to be
<br>&gt; understood|
<br>&gt; |Camosun College, Victoria, BC, Canada| It has to be listened to.
<br>&gt; |
<br>&gt; |email: <a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087968&amp;i=1" target="_top" rel="nofollow" link="external">[hidden email]</a> &nbsp; &nbsp; &nbsp; &nbsp; |
<br>&gt; |
<br>&gt; |phone: +1 250 370 4452 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; Hermann Scherchen.
<br>&gt; &nbsp;|
<br>&gt;
<br>&gt;
<br>&gt;
<br>&gt; ________________________________________________________________
<br>&gt; erlang-questions (at) erlang.org mailing list.
<br>&gt; See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>&gt; To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087968&amp;i=2" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br>&gt;
<br>&gt;
</div><div class="shrink-quote"><span>...</span> [<a href="#">show rest of quote</a>]</div><br><br><br>-- 
<br>"The secret of joy in work is contained in one word - excellence. To
<br>know how to do something well is to enjoy it." - Pearl S. Buck.
<br><br>________________________________________________________________
<br>erlang-questions (at) erlang.org mailing list.
<br>See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087968&amp;i=3" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br><br>
	
	</div>
				</td>
			</tr>
		</tbody></table>
	</div>
	
	<div class="classic-row">
		<div class="classic-header">
			<div class="classic-bar shaded-bg-color rounded-top">
				<div class="classic-author-name nowrap">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=32926">Jeffm-3</a>
				</div>
				<div class="classic-right-menu shaded-bg-color weak-color">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=reply&amp;node=2087966" rel="nofollow">Reply</a> |
					<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html#a2087966',2087966)">Threaded</a>
	<div id="tooltip75716" class="nabble-tooltip rounded" use_title="false">
		Open this post in threaded view
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip75716'));
	</script> |
					<span id="dd_postdropdown2087966"><span id="postdropdown2087966" class="dropdown"><a href="javascript:void(0)" title="Click for more options">More</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingpostdropdown2087966" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpanpostdropdown2087966">Loading...</span></td></tr><tr id="replyToAuthor2087966" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=pm&amp;post=2087966" rel="nofollow">Reply to author</a></td></tr><tr id="editPost2087966" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=edit_post&amp;node=2087966" rel="nofollow">Edit post</a></td></tr><tr id="movePost2087966" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087966" rel="nofollow">Move post</a></td></tr><tr id="deletePost2087966" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087966)" rel="nofollow">Delete this post</a></td></tr><tr id="deleteRecursively2087966" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087966)" rel="nofollow">Delete this post and replies</a></td></tr><tr id="changePostDate2087966" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_post_date&amp;node=2087966" rel="nofollow">Change post date</a></td></tr><tr id="print2087966"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=print_post&amp;node=2087966" rel="nofollow">Print post</a></td></tr><tr id="permalink2087966"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087966.html')">Permalink</a></td></tr><tr id="rawMail2087966" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=raw_mail&amp;node=2087966" rel="nofollow">Raw mail</a></td></tr><tr id="social2087966" style="white-space: nowrap;"><td style="border: medium none;"><a href="http://twitter.com/share?text=Re%3A+Dynamic+code+reloading&amp;related=Erlang&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html" title="Twitter" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/twitter.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;t=Re%3A+Dynamic+code+reloading" title="Facebook" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/facebook.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://del.icio.us/post?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title=Re%3A+Dynamic+code+reloading" title="Delicious" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/delicious.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.google.com/bookmarks/mark?op=add&amp;bkmk=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title=Re%3A+Dynamic+code+reloading" title="Google Bookmarks" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/google.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title=Re%3A+Dynamic+code+reloading" title="Stumble Upon" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/stumbleupon.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;source=Erlang" title="LinkedIn" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/linkedin.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title=Re%3A+Dynamic+code+reloading" title="Digg" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/digg.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("postdropdown2087966", "More","Click for more options");
		dropdown.add('replyToAuthor2087966', '\x3Ca href\x3D\"/user/SendEmail.jtp?type\x3Dpm&amp;post\x3D2087966\" rel\x3D\"nofollow\"\x3EReply to author\x3C/a\x3E', 'display:none');
		dropdown.add('editPost2087966', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dedit_post&amp;node\x3D2087966\" rel\x3D\"nofollow\"\x3EEdit post\x3C/a\x3E', 'display:none');
		dropdown.add('movePost2087966', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087966\" rel\x3D\"nofollow\"\x3EMove post\x3C/a\x3E', 'display:none');
		dropdown.add('deletePost2087966', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087966)\" rel\x3D\"nofollow\"\x3EDelete this post\x3C/a\x3E', 'display:none');
			dropdown.add('deleteRecursively2087966', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087966)\" rel\x3D\"nofollow\"\x3EDelete this post and replies\x3C/a\x3E', 'display:none');
		dropdown.add('changePostDate2087966', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_post_date&amp;node\x3D2087966\" rel\x3D\"nofollow\"\x3EChange post date\x3C/a\x3E', 'display:none');
		dropdown.add('print2087966', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dprint_post&amp;node\x3D2087966\" rel\x3D\"nofollow\"\x3EPrint post\x3C/a\x3E');
		dropdown.add('permalink2087966', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087966.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.add('rawMail2087966', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Draw_mail&amp;node\x3D2087966\" rel\x3D\"nofollow\"\x3ERaw mail\x3C/a\x3E', 'display:none');
		dropdown.add('social2087966', '\x3Ca href\x3D\"http://twitter.com/share?text\x3DRe%3A+Dynamic+code+reloading&amp;related\x3DErlang&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html\" title\x3D\"Twitter\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/twitter.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.facebook.com/share.php?v\x3D4&amp;src\x3Dbm&amp;u\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;t\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Facebook\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/facebook.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://del.icio.us/post?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Delicious\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/delicious.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.google.com/bookmarks/mark?op\x3Dadd&amp;bkmk\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Google Bookmarks\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/google.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.stumbleupon.com/submit?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Stumble Upon\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/stumbleupon.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.linkedin.com/shareArticle?mini\x3Dtrue&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;source\x3DErlang\" title\x3D\"LinkedIn\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/linkedin.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://digg.com/submit?phase\x3D2&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087966.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Digg\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/digg.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E','white-space:nowrap');
		dropdown.build('dd_postdropdown2087966');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=post_dropdown_later&node=2087966' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
					&nbsp;
					<img src="Dynamic-code-reloading-td2087963_files/flag_gray.png" class="report-flag" onclick="Nabble.reportContent(2087966)">
	<div id="tooltip67305" class="nabble-tooltip rounded" use_title="false">
		Report Content as Inappropriate
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip67305'));
	</script>
					<span style="cursor: pointer;" id="starB2087966">
		<img id="img-starB2087966" src="Dynamic-code-reloading-td2087963_files/icon_unstarred.png" class="star" alt="star" title="Add this item to your favorites list">
		<div id="tooltip92418" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip92418'));
	</script>
	</span>
	
				</div>
				<div class="classic-subject-line">
					<span id="red-arrow2087966" class="float-left invisible" style="margin-top: 0.2em;">
		<img title="Selected post" src="Dynamic-code-reloading-td2087963_files/arrow.png" alt="Selected post" height="15" width="15">
	</span>
					<span class="post-date float-left">
		<span id="d1271746005000-668">Apr 20, 2010; 3:46am</span><script type="text/javascript">
		Nabble.get('d1271746005000-668').innerHTML= Nabble.formatDateLong(new Date(1271746005000));
	</script>
	</span>
					<h2 class="post-subject float-left" style="width: 30%; overflow: visible; font-family: inherit;">
		Re: Dynamic code reloading
	</h2>
				</div>
			</div>
		</div>
		<table class="classic-body">
			<tbody><tr>
				<td class="classic-author shaded-bg-color rounded-bottom">
					<div class="avatar-outer">
		<div class="avatar-inner">
			<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=32926" rel="nofollow" title="View profile of Jeffm-3" class="nowrap no-decoration"><img class="avatar medium-border-color" src="Dynamic-code-reloading-td2087963_files/28bb07a60e74c2467cc944364fe4075a.png" alt="Jeffm-3" title="Jeffm-3" height="100" width="100"><img src="Dynamic-code-reloading-td2087963_files/online.png" class="online32926 online invisible" title="User is online" alt="online"></a>

	
	
		</div>
	</div>
	
	
	<div class="post-count32926 avatar-label weak-color">192 posts</div>
	
				</td>
				<td class="classic-message">
					
	
	<div class="weak-color" style="font-size: 80%; padding-bottom: 1em;">
				In reply to <a href="http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087965.html" rel="nofollow">this post</a> by Deryk Barker
			</div>
	<div class="message-text">
		On 20/04/10 4:28 PM, Deryk Barker wrote:
<div style="height: 170px; overflow-y: hidden;" class="shrinkable-quote"><br>&gt; Jeffm wrote:
<br>&gt;&gt; When you loaded the new module in the shell did you use c() or 
<br>&gt;&gt; l(dbase)? If you compiled external to the shell, as you stated, 
<br>&gt;&gt; you'll need to use l(module_name) to tell the shell to load the new 
<br>&gt;&gt; version. 
<br>&gt; I tried c() which took down the server process. At your suggestion, I 
<br>&gt; just tried compiling externally and then used l().
<br>&gt;
<br>&gt; Which worked - the first time, i.e. when all I had done since starting 
<br>&gt; the erlang shell was spawn the server and register its name (which was 
<br>&gt; definitely in the list returned by registered()). When I recompiled 
<br>&gt; externally again and re-used l() it took down the server process...sigh.
</div><div class="shrink-quote"><span>...</span> [<a href="#">show rest of quote</a>]</div><br>At a guest... I saw a similar problem when I was developing a module. 
<br>The problem is that the erlang vm only holds two versions of the code at 
<br>once. This is perfectly alright until you have a mistake in your code 
<br>like I did. The loop wasn't executing the new code and died when a third 
<br>version was added. Try adding a message which will cause the module to 
<br>print the current version of code. For example,
<br><br>-module(eg1)
<br>-export([
<br>&nbsp; &nbsp; &nbsp; &nbsp; loop/0
<br>&nbsp; &nbsp; ]).
<br><br>-define(V, 1).
<br><br>loop()
<br>receive
<br>&nbsp; &nbsp;print_version -&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp;io:format("Current version of ~p is ~p~n", [?MODULE, ?V]),
<br>&nbsp; &nbsp; &nbsp; &nbsp;eg1:loop();
<br>&nbsp; &nbsp;...
<br>&nbsp; end.
<br><br>then after loading the new code sent it a message to see what the 
<br>current version is.
<br><br>A thought just occurred to me. Your probably stuck in the old code as 
<br>the program hasn't progressed around the loop. Load the new version, 
<br>trigger it to go round the loop, then load the third version and trigger 
<br>it again. By trigger, I'm suggesting a message, but any event which 
<br>causes it to go round the loop should work. It only starts the newly 
<br>loaded code once it re-enters to loop.
<br><br>Jeff.
<div style="height: 170px; overflow-y: hidden;" class="shrinkable-quote"><br>&gt; I don't understand what's going on here, my understanding of the 
<br>&gt; manual was that you can have two versions of a module loaded, the 
<br>&gt; current and the old, I should have expected, after the load, the 
<br>&gt; running server to be using the old. It successfully switched to the 
<br>&gt; newly loaded code, via the call dbase:loop(DataBase), the first time I 
<br>&gt; tried this, so - again, as I understand it - it was then using the 
<br>&gt; current.
<br>&gt;
<br>&gt; When I did another load of the module (again using l()), the old old 
<br>&gt; (as it were) is purged and the current becomes the old.
<br>&gt; So why, if my server process was now running the (about to be old) 
<br>&gt; current was it terminated? And why silently?
<br>&gt;
<br>&gt; Any insight gratefully received.
<br>&gt;
<br>&gt; deryk
<br>&gt;
</div><div class="shrink-quote"><span>...</span> [<a href="#">show rest of quote</a>]</div><br><br>________________________________________________________________
<br>erlang-questions (at) erlang.org mailing list.
<br>See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087966&amp;i=0" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br><br>
	
	</div>
				</td>
			</tr>
		</tbody></table>
	</div>
	
	<div class="classic-row">
		<div class="classic-header">
			<div class="classic-bar shaded-bg-color rounded-top">
				<div class="classic-author-name nowrap">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=32926">Jeffm-3</a>
				</div>
				<div class="classic-right-menu shaded-bg-color weak-color">
					<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=reply&amp;node=2087967" rel="nofollow">Reply</a> |
					<a href="javascript:void(0)" onclick="Nabble.setView('threaded', '/Dynamic-code-reloading-tt2087963.html#a2087967',2087967)">Threaded</a>
	<div id="tooltip57081" class="nabble-tooltip rounded" use_title="false">
		Open this post in threaded view
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip57081'));
	</script> |
					<span id="dd_postdropdown2087967"><span id="postdropdown2087967" class="dropdown"><a href="javascript:void(0)" title="Click for more options">More</a> <img src="Dynamic-code-reloading-td2087963_files/more.png" height="10" width="10"><table class="light-bg-color medium-border-color drop-shadow" style="margin-top: 1px;"><tbody><tr id="_loadingpostdropdown2087967" style="display: none;"><td style="padding: 0.4em;"><span id="_loadingSpanpostdropdown2087967">Loading...</span></td></tr><tr id="replyToAuthor2087967" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=pm&amp;post=2087967" rel="nofollow">Reply to author</a></td></tr><tr id="editPost2087967" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=edit_post&amp;node=2087967" rel="nofollow">Edit post</a></td></tr><tr id="movePost2087967" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=move_node&amp;node=2087967" rel="nofollow">Move post</a></td></tr><tr id="deletePost2087967" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deletePost(2087967)" rel="nofollow">Delete this post</a></td></tr><tr id="deleteRecursively2087967" style="display: none;"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="Nabble.deleteFromSite(2087967)" rel="nofollow">Delete this post and replies</a></td></tr><tr id="changePostDate2087967" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=change_post_date&amp;node=2087967" rel="nofollow">Change post date</a></td></tr><tr id="print2087967"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=print_post&amp;node=2087967" rel="nofollow">Print post</a></td></tr><tr id="permalink2087967"><td style="border: medium none;"><a href="javascript:%20void(0)" onclick="prompt('Copy this:','http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087967.html')">Permalink</a></td></tr><tr id="rawMail2087967" style="display: none;"><td style="border: medium none;"><a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=raw_mail&amp;node=2087967" rel="nofollow">Raw mail</a></td></tr><tr id="social2087967" style="white-space: nowrap;"><td style="border: medium none;"><a href="http://twitter.com/share?text=Re%3A+Dynamic+code+reloading&amp;related=Erlang&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html" title="Twitter" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/twitter.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.facebook.com/share.php?v=4&amp;src=bm&amp;u=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;t=Re%3A+Dynamic+code+reloading" title="Facebook" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/facebook.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://del.icio.us/post?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title=Re%3A+Dynamic+code+reloading" title="Delicious" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/delicious.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.google.com/bookmarks/mark?op=add&amp;bkmk=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title=Re%3A+Dynamic+code+reloading" title="Google Bookmarks" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/google.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title=Re%3A+Dynamic+code+reloading" title="Stumble Upon" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/stumbleupon.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;source=Erlang" title="LinkedIn" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/linkedin.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a> <a href="http://digg.com/submit?phase=2&amp;url=http%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title=Re%3A+Dynamic+code+reloading" title="Digg" target="_blank" ignore="y"> <img src="Dynamic-code-reloading-td2087963_files/digg.png" style="width: 16px; height: 16px; margin-top: 0.2em; border: medium none;"> </a></td></tr></tbody></table></span></span>
	<script type="text/javascript">
		var dropdown = new NabbleDropdown("postdropdown2087967", "More","Click for more options");
		dropdown.add('replyToAuthor2087967', '\x3Ca href\x3D\"/user/SendEmail.jtp?type\x3Dpm&amp;post\x3D2087967\" rel\x3D\"nofollow\"\x3EReply to author\x3C/a\x3E', 'display:none');
		dropdown.add('editPost2087967', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dedit_post&amp;node\x3D2087967\" rel\x3D\"nofollow\"\x3EEdit post\x3C/a\x3E', 'display:none');
		dropdown.add('movePost2087967', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dmove_node&amp;node\x3D2087967\" rel\x3D\"nofollow\"\x3EMove post\x3C/a\x3E', 'display:none');
		dropdown.add('deletePost2087967', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deletePost(2087967)\" rel\x3D\"nofollow\"\x3EDelete this post\x3C/a\x3E', 'display:none');
			dropdown.add('deleteRecursively2087967', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"Nabble.deleteFromSite(2087967)\" rel\x3D\"nofollow\"\x3EDelete this post and replies\x3C/a\x3E', 'display:none');
		dropdown.add('changePostDate2087967', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dchange_post_date&amp;node\x3D2087967\" rel\x3D\"nofollow\"\x3EChange post date\x3C/a\x3E', 'display:none');
		dropdown.add('print2087967', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Dprint_post&amp;node\x3D2087967\" rel\x3D\"nofollow\"\x3EPrint post\x3C/a\x3E');
		dropdown.add('permalink2087967', '\x3Ca href\x3D\"javascript: void(0)\" onclick\x3D\"prompt(\'Copy this:\',\'http://erlang.2086793.n4.nabble.com/Dynamic-code-reloading-tp2087963p2087967.html\')\"\x3EPermalink\x3C/a\x3E');
		dropdown.add('rawMail2087967', '\x3Ca href\x3D\"/template/NamlServlet.jtp?macro\x3Draw_mail&amp;node\x3D2087967\" rel\x3D\"nofollow\"\x3ERaw mail\x3C/a\x3E', 'display:none');
		dropdown.add('social2087967', '\x3Ca href\x3D\"http://twitter.com/share?text\x3DRe%3A+Dynamic+code+reloading&amp;related\x3DErlang&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html\" title\x3D\"Twitter\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/twitter.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.facebook.com/share.php?v\x3D4&amp;src\x3Dbm&amp;u\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;t\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Facebook\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/facebook.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://del.icio.us/post?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Delicious\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/delicious.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.google.com/bookmarks/mark?op\x3Dadd&amp;bkmk\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Google Bookmarks\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/google.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.stumbleupon.com/submit?url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Stumble Upon\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/stumbleupon.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://www.linkedin.com/shareArticle?mini\x3Dtrue&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;source\x3DErlang\" title\x3D\"LinkedIn\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/linkedin.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E \x3Ca href\x3D\"http://digg.com/submit?phase\x3D2&amp;url\x3Dhttp%3A%2F%2Ferlang.2086793.n4.nabble.com%2FDynamic-code-reloading-tp2087963p2087967.html&amp;title\x3DRe%3A+Dynamic+code+reloading\" title\x3D\"Digg\" target\x3D\"_blank\" ignore\x3D\"y\"\x3E \x3Cimg src\x3D\"/images/social/digg.png\" style\x3D\"width:16px;height:16px;margin-top:.2em;border:none;\"/\x3E \x3C/a\x3E','white-space:nowrap');
		dropdown.build('dd_postdropdown2087967');
		dropdown.loadOnClick('/template/NamlServlet.jtp?macro=post_dropdown_later&node=2087967' + Nabble.getClientID() + '&_=' + Math.floor(Math.random()*999999));
	</script>
					&nbsp;
					<img src="Dynamic-code-reloading-td2087963_files/flag_gray.png" class="report-flag" onclick="Nabble.reportContent(2087967)">
	<div id="tooltip20743" class="nabble-tooltip rounded" use_title="false">
		Report Content as Inappropriate
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip20743'));
	</script>
					<span style="cursor: pointer;" id="starB2087967">
		<img id="img-starB2087967" src="Dynamic-code-reloading-td2087963_files/icon_unstarred.png" class="star" alt="star" title="Add this item to your favorites list">
		<div id="tooltip31029" class="nabble-tooltip rounded" use_title="true">
		
		<div class="nabble-tooltip-arrow">
			<div class="d1">♦</div>
			<div class="d2">♦</div>
		</div>
	</div>
	<script type="text/javascript">
		Nabble.startTooltip(Nabble.get('tooltip31029'));
	</script>
	</span>
	
				</div>
				<div class="classic-subject-line">
					<span id="red-arrow2087967" class="float-left invisible" style="margin-top: 0.2em;">
		<img title="Selected post" src="Dynamic-code-reloading-td2087963_files/arrow.png" alt="Selected post" height="15" width="15">
	</span>
					<span class="post-date float-left">
		<span id="d1271815490000-659">Apr 20, 2010; 11:04pm</span><script type="text/javascript">
		Nabble.get('d1271815490000-659').innerHTML= Nabble.formatDateLong(new Date(1271815490000));
	</script>
	</span>
					<h2 class="post-subject float-left" style="width: 30%; overflow: visible; font-family: inherit;">
		Re: Dynamic code reloading
	</h2>
				</div>
			</div>
		</div>
		<table class="classic-body">
			<tbody><tr>
				<td class="classic-author shaded-bg-color rounded-bottom">
					<div class="avatar-outer">
		<div class="avatar-inner">
			<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=user_nodes&amp;user=32926" rel="nofollow" title="View profile of Jeffm-3" class="nowrap no-decoration"><img class="avatar medium-border-color" src="Dynamic-code-reloading-td2087963_files/28bb07a60e74c2467cc944364fe4075a.png" alt="Jeffm-3" title="Jeffm-3" height="100" width="100"><img src="Dynamic-code-reloading-td2087963_files/online.png" class="online32926 online invisible" title="User is online" alt="online"></a>

	
	
		</div>
	</div>
	
	
	<div class="post-count32926 avatar-label weak-color">192 posts</div>
	
				</td>
				<td class="classic-message">
					
	
	
	<div class="message-text">
		Was sitting around waiting for a meeting this morning and thought I'd 
<br>create this to clarify erlang hot code updates.:
<br><br>Summary: The following uses this example module to demonstrate hot code 
<br>loading without the use of OTP and one possible reason why a process may 
<br>die during a hot code update.
<br><br>%%%%% Start of file hot.erl %%%%%
<br>%%
<br>%% Simple example of hot code update.
<br>%%
<br>-module(hot).
<br><br>-export([
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; start/0,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; loop/0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]).
<br><br><br>-define(V, 4).
<br><br>start() -&gt;
<br>&nbsp; &nbsp; &nbsp;spawn(?MODULE, loop, []).
<br><br>loop() -&gt;
<br>&nbsp; &nbsp; &nbsp;receive
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;print_version -&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;io:format("~p current version is ~p~n", [?MODULE, ?V]),
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hot:loop();
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Other -&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;io:format("~p got message ~p~n", [?MODULE, Other]),
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hot:loop()
<br>&nbsp; &nbsp; &nbsp;end.
<br><br>%%%%% End hot.erl %%%%%
<br><br>start erl at a unix shell and...
<br><br>compile and load code:
<br><br>1&gt; c(hot).
<br>{ok,hot}
<br><br>Start the process:
<br><br>2&gt; P = hot:start().
<br>&lt;0.42.0&gt;
<br><br>check presence
<br>3&gt; i().
<br>...
<br>&lt;0.42.0&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp;hot:loop/0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 233 &nbsp; &nbsp; &nbsp; 
&nbsp;
<br>1 &nbsp; &nbsp;0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp;hot:loop/0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1
<br>Total &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;24633 &nbsp; 
<br>706328 &nbsp; &nbsp;0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; 224
<br>ok
<br><br>Say hello:
<br><br>4&gt; P ! "hello".
<br>hot got message "hello"
<br>"hello"
<br><br>check version:
<br><br>5&gt; P ! print_version.
<br>hot current version is 1
<br>print_version
<br><br>Edit hot.erl in a text editor in another window and change
<br>-define(V, 1).
<br>to
<br>-define(V,2).
<br><br>Compile and load new code:
<br><br>6&gt; c(hot).
<br>{ok,hot}
<br><br>Check version:
<br><br>7&gt; P ! print_version.
<br>hot current version is 1
<br>print_version
<br><br>Notice it hasn't changed. Check again:
<br><br>8&gt; P ! print_version.
<br>hot current version is 2
<br>print_version
<br><br>It's now version two as it's re-entered the loop. Now to break it:
<br><br>Edit hot.erl again setting V to 3, then compile and load with
<br><br>9&gt; c(hot).
<br>{ok,hot}
<br><br>check still running with
<br><br>10&gt; i().
<br>....
<br>&lt;0.42.0&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp;hot:loop/0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 233 &nbsp; &nbsp; &nbsp; 
<br>61 &nbsp; &nbsp;0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp;hot:loop/0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1
<br>Total &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;26607 &nbsp; 
<br>749896 &nbsp; &nbsp;0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; 224
<br>ok
<br><br>Edit hot.erl setting V to 4, then compile and load,
<br><br>11&gt; c(hot).
<br>{ok,hot}
<br><br>Check for presence of process,
<br>12&gt; i().
<br>&lt;0.35.0&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp;erlang:apply/2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2584 &nbsp; &nbsp;
<br>47585 &nbsp; &nbsp;0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp;c:pinfo/1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 49
<br>Total &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;27361 &nbsp; 
<br>780079 &nbsp; &nbsp;0
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; 223
<br>ok
<br><br>The process has died! This is due to version 2 of the code being 
<br>unloaded to make room for version 4, version 3 and 4 now being in 
<br>memory, before the process had looped and exited version 2 and started 
<br>using version 3 as it is blocked on the receive waiting for a message. 
<br>One possible fix for this is to have an 'update' message which does 
<br>nothing except cause the process to loop in order to load new code when 
<br>loaded by sending each process affected the update message after the new 
<br>code is loaded.
<br><br>Hope that clarifies things,
<br><br>Jeff.
<br><br><br>________________________________________________________________
<br>erlang-questions (at) erlang.org mailing list.
<br>See <a href="http://www.erlang.org/faq.html" target="_top" rel="nofollow" link="external">http://www.erlang.org/faq.html</a><br>To unsubscribe; mailto:<a href="http://erlang.2086793.n4.nabble.com/user/SendEmail.jtp?type=node&amp;node=2087967&amp;i=0" target="_top" rel="nofollow" link="external">[hidden email]</a>
<br><br>
	
	</div>
				</td>
			</tr>
		</tbody></table>
	</div>
	
	
		
	</div>
	</div>
			<div id="topic-footer" class="weak-color" style="padding-top: 1em;">
		«
		<a href="http://erlang.2086793.n4.nabble.com/Erlang-Questions-f2086794.html">Return to Erlang Questions</a>
		&nbsp;|&nbsp;
		<span id="v2087963" style="">210 views</span>
	
	
	</div>
			<div id="report-inappropriate-content" class="report-inappropriate-content rounded">
		<div id="report-inappropriate-content-inner" class="no-bg-color medium-border-color border2">
			<div class="big">Loading...</div>
		</div>
	</div>
			<table class="footer-table shaded-bg-color">
		<tbody><tr>
			<td class="footer-left weak-color">
				Powered by
				<a href="http://www.nabble.com/" target="_top">Nabble</a>
			</td>
			<td class="footer-right">
				<a href="http://erlang.2086793.n4.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&amp;id=classic_forum_topic%21nabble%3Atopic.naml&amp;base=nabble.view.web.template.ServletNamespace" rel="nofollow">See how NAML generates this page</a>
			</td>
		</tr>
	</tbody></table>
			<script type="text/javascript">
var scriptUrl = '/template/NamlServlet.jtp?macro=js_page&searchSpecial=2087963&incViewCount=2087963&newsflash=&starB=2087963|2087964|2087965|2087968|2087966|2087967&visitorOnline=&avatarOnline=50138|32926|100905&postCount=50138|32926|100905&markVisited=2087967&views=2087963';
scriptUrl += '&_=' + Math.floor(Math.random()*9999) + Nabble.getClientID();
$.getScript(scriptUrl, function() { Nabble.resizeFrames(); });
</script>

						<script type="text/javascript">
		if (Nabble.analytics) Nabble.analytics();
	</script>
	<!-- Start Quantcast tag -->
			<script type="text/javascript">
			_qoptions={ qacct:"p-34EL1DZyJypTI" };
			</script>
			<script type="text/javascript" src="Dynamic-code-reloading-td2087963_files/quant.js"></script>
			<noscript>
			<a href="http://www.quantcast.com/p-34EL1DZyJypTI" target="_blank" rel="nofollow"><img src="http://pixel.quantserve.com/pixel/p-34EL1DZyJypTI.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/></a>
			</noscript>
			<!-- End Quantcast tag -->
					</div>
					<script type="text/javascript">
						$(document).ready(function() { Nabble.fixCookieClientID(); });
					</script>
					<!-- n4.nabble.com | Site ID = 2086793 -->
				</body></html>